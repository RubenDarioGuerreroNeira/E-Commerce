/* eslint-disable prettier/prettier */
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';
import { LoggerMiddleware } from './Middlewares/LoggerMiddleware';
import { ValidationPipe } from '@nestjs/common';
import { DocumentBuilder, SwaggerModule } from '@nestjs/swagger'

async function bootstrap() {
  const app = await NestFactory.create(AppModule);

  const options = new DocumentBuilder()
    .setTitle('E-Commerce M04 HENRY')
    .setDescription('RUBEN DARIO GUERRERO NEIRA')
    .setVersion('1.0')
    .addBearerAuth()
    .build();

  const document = SwaggerModule.createDocument(app, options)
  SwaggerModule.setup('api', app, document , {
    customCss: `
      .swagger-ui .topbar { background: #fff; }
      .swagger-ui .topbar img { content: url('data:image/jpeg;base64,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jC44bnngdWVYJndQaAa6dzukfTbjcnj6/ADyB+hV4tnCKtepGoqss1pWT+hjj4UouGRWurs/Wuc1zXMcWuachwOCD2hSqg2jasoYhEy7OlYBgdPG2QjzIyfMqKIvXtc4DcXzVF8vzdy7XKaeIHIi4MZ/S0AHzWnREAREQgREQBERAbiy6jr7Thkb+mpx+pkPAfJPV7u5Ta16stlfhsknosx+JNwHk7kqxReXjOEYbFdJq0u1fs7cPj61DRO67GW5VWW112XT0UDy747W4J8xxWpqNEWqT80+ph7mv3h9IKglFcq6gx6HVyxAfFa71fYeC3lNre6RYE8dPOO9pafaPwXlvhfEcP7irdfW34eh3LG4Or72nZ+u82EugW/qbi4fLhz7ivA6BqM8LjER3wkfesiHXzMDprc8Hr3JQfeAvca8oMcaOrB/l/FYZ+OQ0tf7TLLwyXpmC3QM/wAa4xjwhP4rJi0DAPz1wld3MjDfflfT9e0v6ugqD8pzR7srCqNeVTsinoYY+97y73YWS9uVPl9pH7Mh8/E3lNo2zw4L45ZyP8yQ+4YWbLLZrDHl3otJw5MaA53kOJVfVmprxWAh9Y6Np+LCNz6Rx+lalxLnFziS48yTklbY8GxNb+1WbXYv90/BrfEaNP3FPv8AXmTC8a3kkDorVEYhy6eQZd5N5Dz9ijdDBLdrtDDLI576iT+8e52TjmTnwBWEi9ihgqWGpuNBWb57s8+rialaalUd12El1neY6+eOio3A0lN1t5Pdy4dwHD2qNIi24bDww9JU4bIwrVZVpucuYREW81BERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAf/2Q=='); width: auto; height: 50px; }
    `,
    customSiteTitle: 'E-Commerce API Docs',
  });

  app.use(LoggerMiddleware)
  app.useGlobalPipes(new ValidationPipe())
  
  // await app.listen(8800);ORIGINAL FUNCIONANDO 
  const port = process.env.PORT || 3000;
  await app.listen(port)
  console.log(`Application is running on: ${await app.getUrl()}`);
}

bootstrap();
